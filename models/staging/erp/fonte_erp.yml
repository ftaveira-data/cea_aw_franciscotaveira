version: 2

sources:
  - name: erp
    description: "Sistema de vendas da Adventure Works"
    schema: dbt_ftaveira_aw_raw
    database: fea24_11

    tables:
      # ðŸ“Œ Tabela principal de pedidos
      - name: SalesOrderHeader
        description: "CabeÃ§alho dos pedidos de venda"
        columns:
          - name: SalesOrderID
            description: "ID Ãºnico do pedido de venda"
            tests:
              - unique
              - not_null
          - name: CustomerID
            description: "ID do cliente"
            tests:
              - not_null
          - name: SalesPersonID
            description: "ID do vendedor responsÃ¡vel pela venda"
          - name: OrderDate
            description: "Data em que o pedido foi realizado"
            tests:
              - not_null
          - name: TotalDue
            description: "Valor total do pedido"

      # ðŸ“Œ Tabela de detalhes dos pedidos
      - name: SalesOrderDetail
        description: "Detalhes dos itens vendidos em cada pedido"
        columns:
          - name: SalesOrderID
            description: "ID do pedido (chave estrangeira para SalesOrderHeader)"
            tests:
              - not_null
          - name: ProductID
            description: "ID do produto vendido"
            tests:
              - not_null
          - name: OrderQty
            description: "Quantidade comprada"
          - name: UnitPrice
            description: "PreÃ§o unitÃ¡rio do produto"
          - name: LineTotal
            description: "Valor total da linha de pedido"

      # ðŸ“Œ Tabela de clientes
      - name: Customer
        description: "Clientes cadastrados no ERP"
        columns:
          - name: CustomerID
            description: "ID Ãºnico do cliente"
            tests:
              - unique
              - not_null
          - name: PersonID
            description: "ReferÃªncia para a tabela Person"
          - name: StoreID
            description: "ID da loja vinculada ao cliente"
          - name: TerritoryID
            description: "ID da regiÃ£o de vendas"

      # ðŸ“Œ Tabela de produtos
      - name: Product
        description: "Produtos disponÃ­veis para venda"
        columns:
          - name: ProductID
            description: "ID Ãºnico do produto"
            tests:
              - unique
              - not_null
          - name: Name
            description: "Nome do produto"
          - name: ProductSubCategoryID
            description: "ID da subcategoria do produto"
          - name: StandardCost
            description: "Custo padrÃ£o do produto"
          - name: ListPrice
            description: "PreÃ§o de venda sugerido"

      # ðŸ“Œ Tabela de vendedores
      - name: SalesPerson
        description: "Vendedores cadastrados no ERP"
        columns:
          - name: BusinessEntityID
            description: "ID Ãºnico do vendedor"
            tests:
              - unique
              - not_null
          - name: SalesQuota
            description: "Meta de vendas do vendedor"
          - name: TerritoryID
            description: "RegiÃ£o de vendas do vendedor"

      # ðŸ“Œ Tabela de taxas de imposto
      - name: SalesTaxRate
        description: "Taxas de imposto aplicadas nas vendas"
        columns:
          - name: SalesTaxRateID
            description: "ID Ãºnico da taxa de imposto"
            tests:
              - unique
              - not_null
          - name: TaxRate
            description: "Percentual do imposto aplicado"
          - name: StateProvinceID
            description: "ID do estado ou provÃ­ncia onde o imposto se aplica"

      # ðŸ“Œ Tabela de mÃ©todos de envio
      - name: ShipMethod
        description: "MÃ©todos de envio disponÃ­veis"
        columns:
          - name: ShipMethodID
            description: "ID Ãºnico do mÃ©todo de envio"
            tests:
              - unique
              - not_null
          - name: Name
            description: "Nome do mÃ©todo de envio"
          - name: ShipBase
            description: "Custo base do frete"
          - name: ShipRate
            description: "Taxa variÃ¡vel do frete"

      # ðŸ“Œ Tabela de motivos das vendas (IMPORTANTE PARA ITEM 4F)
      - name: SalesReason
        description: "Motivos das vendas cadastrados no ERP"
        columns:
          - name: SalesReasonID
            description: "ID Ãºnico do motivo da venda"
            tests:
              - unique
              - not_null
          - name: Name
            description: "Nome do motivo da venda"
          - name: ReasonType
            description: "Categoria do motivo (ex: Promotion, Marketing, etc.)"

      # ðŸ“Œ Tabela de relacionamento entre pedidos e motivos da venda
      - name: SalesOrderHeaderSalesReason
        description: "Relacionamento entre pedidos e motivos de venda"
        columns:
          - name: SalesOrderID
            description: "ID do pedido associado ao motivo de venda"
            tests:
              - not_null
          - name: SalesReasonID
            description: "ID do motivo de venda associado ao pedido"
            tests:
              - not_null
